(* Content-type: application/mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 7.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       145,          7]
NotebookDataLength[      8183,        264]
NotebookOptionsPosition[      7501,        238]
NotebookOutlinePosition[      7938,        255]
CellTagsIndexPosition[      7895,        252]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell["Magnification Calculation for Binary Lens", "Text",
 CellChangeTimes->{{3.735645227463869*^9, 3.735645253828466*^9}}],

Cell["\<\
Define equation for magnification by assigning the equations: partial zeta \
with respect to conjugate of z, and the determinant of the Jacobian. Use \
substitution to replace conjugate of z\
\>", "Text",
 CellChangeTimes->{{3.735645558676745*^9, 3.735645663700418*^9}, {
  3.735646309732502*^9, 3.735646353508526*^9}, {3.735734234953166*^9, 
  3.735734236424037*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"dzeta", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"(", 
     RowBox[{"m", "-", "dm"}], ")"}], "/", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Conjugate", "[", "z1", "]"}], "-", 
        RowBox[{"Conjugate", "[", "z", "]"}]}], ")"}], "^", "2"}], ")"}]}], 
   "+", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{"m", "+", "dm"}], ")"}], "/", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"-", 
         RowBox[{"Conjugate", "[", "z1", "]"}]}], "-", 
        RowBox[{"Conjugate", "[", "z", "]"}]}], ")"}], "^", "2"}], 
     ")"}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{"detJ", "=", 
  RowBox[{"Refine", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Simplify", "[", 
      RowBox[{"1", "-", 
       RowBox[{"dzeta", "*", 
        RowBox[{"Conjugate", "[", "dzeta", "]"}]}]}], "]"}], "/.", 
     RowBox[{
      RowBox[{"Conjugate", "[", "z", "]"}], "\[Rule]", 
      RowBox[{
       RowBox[{"Conjugate", "[", "\[Zeta]", "]"}], "-", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"m", "-", "dm"}], ")"}], "/", 
        RowBox[{"(", 
         RowBox[{"z1", "-", "z"}], ")"}]}], "-", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"m", "+", "dm"}], ")"}], "/", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "z1"}], "-", "z"}], ")"}]}]}]}]}], ",", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"z1", ",", "m", ",", "dm"}], "}"}], "\[Element]", "Reals"}]}], 
   "]"}]}]}], "Input",
 CellChangeTimes->{{3.735645273669798*^9, 3.735645541115162*^9}, {
  3.735645772953195*^9, 3.735645925254992*^9}, {3.735646287706191*^9, 
  3.7356463079615183`*^9}, {3.735647741802751*^9, 3.735647754250296*^9}, {
  3.735647819914898*^9, 3.7356478204569683`*^9}, {3.735648973435904*^9, 
  3.73564898127134*^9}, {3.735649021834523*^9, 3.7356490410175323`*^9}, {
  3.735649089703773*^9, 3.735649128121537*^9}, {3.7356507249689713`*^9, 
  3.7356507602829638`*^9}, {3.7356508182894897`*^9, 3.73565085937341*^9}, {
  3.735650895627041*^9, 3.735650896426394*^9}}],

Cell[BoxData[
 RowBox[{
  FractionBox[
   RowBox[{"dm", "+", "m"}], 
   SuperscriptBox[
    RowBox[{"(", 
     RowBox[{
      RowBox[{"-", 
       RowBox[{"Conjugate", "[", "z", "]"}]}], "-", 
      RowBox[{"Conjugate", "[", "z1", "]"}]}], ")"}], "2"]], "+", 
  FractionBox[
   RowBox[{
    RowBox[{"-", "dm"}], "+", "m"}], 
   SuperscriptBox[
    RowBox[{"(", 
     RowBox[{
      RowBox[{"-", 
       RowBox[{"Conjugate", "[", "z", "]"}]}], "+", 
      RowBox[{"Conjugate", "[", "z1", "]"}]}], ")"}], "2"]]}]], "Output",
 CellChangeTimes->{
  3.735647675769568*^9, 3.735647756148741*^9, 3.735648781641501*^9, 
   3.735648982302906*^9, 3.735649096868764*^9, 3.735649142916995*^9, {
   3.735650873033387*^9, 3.735650897353509*^9}, 3.735733913825179*^9}],

Cell[BoxData[
 RowBox[{"1", "-", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{
     FractionBox[
      RowBox[{
       RowBox[{"-", "dm"}], "+", "m"}], 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{"z", "-", "z1"}], ")"}], "2"]], "+", 
     FractionBox[
      RowBox[{"dm", "+", "m"}], 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{"z", "+", "z1"}], ")"}], "2"]]}], ")"}], " ", 
   RowBox[{"(", 
    RowBox[{
     FractionBox[
      RowBox[{
       RowBox[{"-", "dm"}], "+", "m"}], 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", 
          FractionBox[
           RowBox[{"dm", "+", "m"}], 
           RowBox[{
            RowBox[{"-", "z"}], "-", "z1"}]]}], "-", "z1", "-", 
         FractionBox[
          RowBox[{
           RowBox[{"-", "dm"}], "+", "m"}], 
          RowBox[{
           RowBox[{"-", "z"}], "+", "z1"}]], "+", 
         RowBox[{"Conjugate", "[", "\[Zeta]", "]"}]}], ")"}], "2"]], "+", 
     FractionBox[
      RowBox[{"dm", "+", "m"}], 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", 
          FractionBox[
           RowBox[{"dm", "+", "m"}], 
           RowBox[{
            RowBox[{"-", "z"}], "-", "z1"}]]}], "+", "z1", "-", 
         FractionBox[
          RowBox[{
           RowBox[{"-", "dm"}], "+", "m"}], 
          RowBox[{
           RowBox[{"-", "z"}], "+", "z1"}]], "+", 
         RowBox[{"Conjugate", "[", "\[Zeta]", "]"}]}], ")"}], "2"]]}], 
    ")"}]}]}]], "Output",
 CellChangeTimes->{
  3.735647675769568*^9, 3.735647756148741*^9, 3.735648781641501*^9, 
   3.735648982302906*^9, 3.735649096868764*^9, 3.735649142916995*^9, {
   3.735650873033387*^9, 3.735650897353509*^9}, 3.735733913889078*^9}]
}, Open  ]],

Cell["\<\
In this notation: dm,  m, and z1 are defined as in Python code; z, the image \
position, has been solved for each image (solved in the function, \"solutions\
\"); and \[Zeta], the source position, expressed by z in the Python code, are \
given by the parameters x and y.\
\>", "Text",
 CellChangeTimes->{{3.735649208819779*^9, 3.735649291059946*^9}, {
  3.735649338613776*^9, 3.735649503060985*^9}, {3.735649536884417*^9, 
  3.7356495429002438`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"detJ", "=", 
  RowBox[{"Refine", "[", 
   RowBox[{
    RowBox[{"Simplify", "[", 
     RowBox[{"1", "-", 
      RowBox[{"dzeta", "*", 
       RowBox[{"Conjugate", "[", "dzeta", "]"}]}]}], "]"}], ",", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"z1", ",", "m", ",", "dm"}], "}"}], "\[Element]", "Reals"}]}], 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.735734659055571*^9, 3.7357346610994997`*^9}}],

Cell[BoxData[
 RowBox[{"1", "-", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{
     FractionBox[
      RowBox[{
       RowBox[{"-", "dm"}], "+", "m"}], 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{"z", "-", "z1"}], ")"}], "2"]], "+", 
     FractionBox[
      RowBox[{"dm", "+", "m"}], 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{"z", "+", "z1"}], ")"}], "2"]]}], ")"}], " ", 
   RowBox[{"(", 
    RowBox[{
     FractionBox[
      RowBox[{
       RowBox[{"-", "dm"}], "+", "m"}], 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", "z1"}], "+", 
         RowBox[{"Conjugate", "[", "z", "]"}]}], ")"}], "2"]], "+", 
     FractionBox[
      RowBox[{"dm", "+", "m"}], 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{"z1", "+", 
         RowBox[{"Conjugate", "[", "z", "]"}]}], ")"}], "2"]]}], 
    ")"}]}]}]], "Output",
 CellChangeTimes->{3.735734674637864*^9}]
}, Open  ]]
},
WindowSize->{816, 969},
WindowMargins->{{Automatic, 0}, {Automatic, 25}},
Magnification:>FEPrivate`If[
  FEPrivate`Equal[FEPrivate`$VersionNumber, 6.], 1.25, 1.25 Inherited],
FrontEndVersion->"7.0 for Linux x86 (64-bit) (November 11, 2008)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[545, 20, 123, 1, 37, "Text"],
Cell[671, 23, 378, 7, 61, "Text"],
Cell[CellGroupData[{
Cell[1074, 34, 2068, 58, 139, "Input"],
Cell[3145, 94, 753, 22, 59, "Output"],
Cell[3901, 118, 1731, 55, 144, "Output"]
}, Open  ]],
Cell[5647, 176, 460, 8, 85, "Text"],
Cell[CellGroupData[{
Cell[6132, 188, 423, 12, 64, "Input"],
Cell[6558, 202, 927, 33, 60, "Output"]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
